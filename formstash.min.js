chrome.runtime.onMessage.addListener(a=>{if('getSource'==a.action){a.source}});function onWindowLoad(){const a=document.querySelector('#stash'),b=document.querySelector('#message');chrome.storage.local.get('formStash',e=>{if(console.log(e),'object'==typeof e.formStash)for(hash in a.innerHTML='',e.formStash)a.innerHTML+=`<div id='${hash}' class='stash-file'>${e.formStash[hash].title}</div><div id='${hash}' class='delete-stash-file'></div>`;const f=document.querySelectorAll('.stash-file');f.forEach(h=>{h.addEventListener('click',()=>{chrome.tabs.executeScript(null,{code:`var stashfileId = ${h.id};`},()=>{chrome.tabs.executeScript(null,{file:'pop-field-data.js'},()=>{chrome.runtime.lastError&&(b.innerText=`There was an error injecting script : \n${chrome.runtime.lastError.message}`)})})})});const g=document.querySelectorAll('.delete-stash-file');g.forEach(h=>{h.addEventListener('click',()=>{chrome.storage.local.get('formStash',i=>{const j=i.formStash||{};delete j[h.id],chrome.storage.local.set({formStash:j}),location.reload()})})})});const c=document.getElementById('checkPage');c.addEventListener('click',()=>{chrome.tabs.executeScript(null,{file:'stash-field-data.js'},()=>{chrome.runtime.lastError&&(b.innerText=`There was an error injecting script : \n${chrome.runtime.lastError.message}`),location.reload()})},!1);const d=document.getElementById('clearAll');d.addEventListener('click',()=>{chrome.storage.local.set({formStash:''}),location.reload()},!1)}window.onload=onWindowLoad;